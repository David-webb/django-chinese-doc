

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Django 1.7.2 release notes &mdash; django-chinese-docs 1.10 文档</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="索引"
              href="../genindex.html"/>
        <link rel="search" title="搜索" href="../search.html"/>
    <link rel="top" title="django-chinese-docs 1.10 文档" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> django-chinese-docs
          

          
          </a>

          
            
            
              <div class="version">
                1.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/index.html">入门教程</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">django-chinese-docs</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Django 1.7.2 release notes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/releases/1.7.2.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="django-1-7-2-release-notes">
<h1>Django 1.7.2 release notes<a class="headerlink" href="#django-1-7-2-release-notes" title="永久链接至标题">¶</a></h1>
<p><em>January 2, 2015</em></p>
<p>Django 1.7.2 fixes several bugs in 1.7.1.</p>
<p>Additionally, Django’s vendored version of six, <a class="reference internal" href="../topics/python3.html#module-django.utils.six" title="django.utils.six"><code class="xref py py-mod docutils literal"><span class="pre">django.utils.six</span></code></a>, has
been upgraded to the latest release (1.9.0).</p>
<div class="section" id="bugfixes">
<h2>Bugfixes<a class="headerlink" href="#bugfixes" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li>Fixed migration’s renaming of auto-created many-to-many tables when changing
<a class="reference internal" href="../ref/models/options.html#django.db.models.Options.db_table" title="django.db.models.Options.db_table"><code class="xref py py-attr docutils literal"><span class="pre">Meta.db_table</span></code></a> (<a href="#id1"><span class="problematic" id="id2">:ticket:`23630`</span></a>).</li>
<li>Fixed a migration crash when adding an explicit <code class="docutils literal"><span class="pre">id</span></code> field to a model on
SQLite (<a href="#id3"><span class="problematic" id="id4">:ticket:`23702`</span></a>).</li>
<li>Added a warning for duplicate models when a module is reloaded. Previously a
<code class="docutils literal"><span class="pre">RuntimeError</span></code> was raised every time two models clashed in the app registry.
(<a href="#id5"><span class="problematic" id="id6">:ticket:`23621`</span></a>).</li>
<li>Prevented <a class="reference internal" href="../ref/django-admin.html#django-admin-flush"><code class="xref std std-djadmin docutils literal"><span class="pre">flush</span></code></a> from loading initial data for migrated apps
(<a href="#id7"><span class="problematic" id="id8">:ticket:`23699`</span></a>).</li>
<li>Fixed a <a class="reference internal" href="../ref/django-admin.html#django-admin-makemessages"><code class="xref std std-djadmin docutils literal"><span class="pre">makemessages</span></code></a> regression in 1.7.1 when
<a class="reference internal" href="../ref/settings.html#std:setting-STATIC_ROOT"><code class="xref std std-setting docutils literal"><span class="pre">STATIC_ROOT</span></code></a> has the default <code class="docutils literal"><span class="pre">None</span></code> value (<a href="#id9"><span class="problematic" id="id10">:ticket:`23717`</span></a>).</li>
<li>Added GeoDjango compatibility with mysqlclient database driver.</li>
<li>Fixed MySQL 5.6+ crash with <code class="docutils literal"><span class="pre">GeometryField</span></code>s in migrations
(<a href="#id11"><span class="problematic" id="id12">:ticket:`23719`</span></a>).</li>
<li>Fixed a migration crash when removing a field that is referenced in
<code class="docutils literal"><span class="pre">AlterIndexTogether</span></code> or <code class="docutils literal"><span class="pre">AlterUniqueTogether</span></code> (<a href="#id13"><span class="problematic" id="id14">:ticket:`23614`</span></a>).</li>
<li>Updated the first day of the week in the Ukrainian locale to Monday.</li>
<li>Added support for transactional spatial metadata initialization on
SpatiaLite 4.1+ (<a href="#id15"><span class="problematic" id="id16">:ticket:`23152`</span></a>).</li>
<li>Fixed a migration crash that prevented changing a nullable field with a
default to non-nullable with the same default (<a href="#id17"><span class="problematic" id="id18">:ticket:`23738`</span></a>).</li>
<li>Fixed a migration crash when adding <code class="docutils literal"><span class="pre">GeometryField</span></code>s with <code class="docutils literal"><span class="pre">blank=True</span></code>
on PostGIS (<a href="#id19"><span class="problematic" id="id20">:ticket:`23731`</span></a>).</li>
<li>Allowed usage of <code class="docutils literal"><span class="pre">DateTimeField()</span></code> as <code class="docutils literal"><span class="pre">Transform.output_field</span></code>
(<a href="#id21"><span class="problematic" id="id22">:ticket:`23420`</span></a>).</li>
<li>Fixed a migration serializing bug involving <code class="docutils literal"><span class="pre">float(&quot;nan&quot;)</span></code> and
<code class="docutils literal"><span class="pre">float(&quot;inf&quot;)</span></code> (<a href="#id23"><span class="problematic" id="id24">:ticket:`23770`</span></a>).</li>
<li>Fixed a regression where custom form fields having a <code class="docutils literal"><span class="pre">queryset</span></code> attribute
but no <code class="docutils literal"><span class="pre">limit_choices_to</span></code> could not be used in a
<a class="reference internal" href="../topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><code class="xref py py-class docutils literal"><span class="pre">ModelForm</span></code></a> (<a href="#id25"><span class="problematic" id="id26">:ticket:`23795`</span></a>).</li>
<li>Fixed a custom field type validation error with MySQL backend when
<code class="docutils literal"><span class="pre">db_type</span></code> returned <code class="docutils literal"><span class="pre">None</span></code> (<a href="#id27"><span class="problematic" id="id28">:ticket:`23761`</span></a>).</li>
<li>Fixed a migration crash when a field is renamed that is part of an
<code class="docutils literal"><span class="pre">index_together</span></code> (<a href="#id29"><span class="problematic" id="id30">:ticket:`23859`</span></a>).</li>
<li>Fixed <a class="reference internal" href="../ref/django-admin.html#django-admin-squashmigrations"><code class="xref std std-djadmin docutils literal"><span class="pre">squashmigrations</span></code></a> to respect the <code class="docutils literal"><span class="pre">--no-optimize</span></code> parameter
(<a href="#id31"><span class="problematic" id="id32">:ticket:`23799`</span></a>).</li>
<li>Made <a class="reference internal" href="../ref/migration-operations.html#django.db.migrations.operations.RenameModel" title="django.db.migrations.operations.RenameModel"><code class="xref py py-class docutils literal"><span class="pre">RenameModel</span></code></a> reversible
(<a href="#id33"><span class="problematic" id="id34">:ticket:`22248`</span></a>)</li>
<li>Avoided unnecessary rollbacks of migrations from other apps when migrating
backwards (<a href="#id35"><span class="problematic" id="id36">:ticket:`23410`</span></a>).</li>
<li>Fixed a rare query error when using deeply nested subqueries
(<a href="#id37"><span class="problematic" id="id38">:ticket:`23605`</span></a>).</li>
<li>Fixed a crash in migrations when deleting a field that is part of a
<code class="docutils literal"><span class="pre">index/unique_together</span></code> constraint (<a href="#id39"><span class="problematic" id="id40">:ticket:`23794`</span></a>).</li>
<li>Fixed <code class="docutils literal"><span class="pre">django.core.files.File.__repr__()</span></code> when the file’s <code class="docutils literal"><span class="pre">name</span></code> contains
Unicode characters (<a href="#id41"><span class="problematic" id="id42">:ticket:`23888`</span></a>).</li>
<li>Added missing context to the admin’s <code class="docutils literal"><span class="pre">delete_selected</span></code> view that prevented
custom site header, etc. from appearing (<a href="#id43"><span class="problematic" id="id44">:ticket:`23898`</span></a>).</li>
<li>Fixed a regression with dynamically generated inlines and allowed field
references in the admin (<a href="#id45"><span class="problematic" id="id46">:ticket:`23754`</span></a>).</li>
<li>Fixed an infinite loop bug for certain cyclic migration dependencies, and made
the error message for cyclic dependencies much more helpful.</li>
<li>Added missing <code class="docutils literal"><span class="pre">index_together</span></code> handling for SQLite (<a href="#id47"><span class="problematic" id="id48">:ticket:`23880`</span></a>).</li>
<li>Fixed a crash when <code class="docutils literal"><span class="pre">RunSQL</span></code> SQL content was collected by the schema editor,
typically when using <code class="docutils literal"><span class="pre">sqlmigrate</span></code> (<a href="#id49"><span class="problematic" id="id50">:ticket:`23909`</span></a>).</li>
<li>Fixed a regression in <code class="docutils literal"><span class="pre">contrib.admin</span></code> add/change views which caused some
<code class="docutils literal"><span class="pre">ModelAdmin</span></code> methods to receive the incorrect <code class="docutils literal"><span class="pre">obj</span></code> value
(<a href="#id51"><span class="problematic" id="id52">:ticket:`23934`</span></a>).</li>
<li>Fixed <code class="docutils literal"><span class="pre">runserver</span></code> crash when socket error message contained Unicode
characters (<a href="#id53"><span class="problematic" id="id54">:ticket:`23946`</span></a>).</li>
<li>Fixed serialization of <code class="docutils literal"><span class="pre">type</span></code> when adding a <code class="docutils literal"><span class="pre">deconstruct()</span></code> method
(<a href="#id55"><span class="problematic" id="id56">:ticket:`23950`</span></a>).</li>
<li>Prevented the
<code class="docutils literal"><span class="pre">django.contrib.auth.middleware.SessionAuthenticationMiddleware</span></code> from
setting a <code class="docutils literal"><span class="pre">&quot;Vary:</span> <span class="pre">Cookie&quot;</span></code> header on all responses (<a href="#id57"><span class="problematic" id="id58">:ticket:`23939`</span></a>).</li>
<li>Fixed a crash when adding <code class="docutils literal"><span class="pre">blank=True</span></code> to <code class="docutils literal"><span class="pre">TextField()</span></code> on MySQL
(<a href="#id59"><span class="problematic" id="id60">:ticket:`23920`</span></a>).</li>
<li>Fixed index creation by the migration infrastructure, particularly when
dealing with PostgreSQL specific <code class="docutils literal"><span class="pre">{text|varchar}_pattern_ops</span></code> indexes
(<a href="#id61"><span class="problematic" id="id62">:ticket:`23954`</span></a>).</li>
<li>Fixed bug in <code class="docutils literal"><span class="pre">makemigrations</span></code> that created broken migration files when
dealing with multiple table inheritance and inheriting from more than one
model (<a href="#id63"><span class="problematic" id="id64">:ticket:`23956`</span></a>).</li>
<li>Fixed a crash when a <code class="docutils literal"><span class="pre">MultiValueField</span></code> has invalid data (<a href="#id65"><span class="problematic" id="id66">:ticket:`23674`</span></a>).</li>
<li>Fixed a crash in the admin when using “Save as new” and also deleting a
related inline (<a href="#id67"><span class="problematic" id="id68">:ticket:`23857`</span></a>).</li>
<li>Always converted <code class="docutils literal"><span class="pre">related_name</span></code> to text (unicode), since that is required
on Python 3 for interpolation. Removed conversion of <code class="docutils literal"><span class="pre">related_name</span></code> to text
in migration deconstruction (<a href="#id69"><span class="problematic" id="id70">:ticket:`23455`</span></a> and <a href="#id71"><span class="problematic" id="id72">:ticket:`23982`</span></a>).</li>
<li>Enlarged the sizes of tablespaces which are created by default for testing
on Oracle (the main tablespace was increased from 200M to 300M and the
temporary tablespace from 100M to 150M). This was required to accommodate
growth in Django’s own test suite (<a href="#id73"><span class="problematic" id="id74">:ticket:`23969`</span></a>).</li>
<li>Fixed <code class="docutils literal"><span class="pre">timesince</span></code> filter translations in Korean (<a href="#id75"><span class="problematic" id="id76">:ticket:`23989`</span></a>).</li>
<li>Fixed the SQLite <code class="docutils literal"><span class="pre">SchemaEditor</span></code> to properly add defaults in the absence of
a user specified <code class="docutils literal"><span class="pre">default</span></code>. For example, a <code class="docutils literal"><span class="pre">CharField</span></code> with <code class="docutils literal"><span class="pre">blank=True</span></code>
didn’t set existing rows to an empty string which resulted in a crash when
adding the <code class="docutils literal"><span class="pre">NOT</span> <span class="pre">NULL</span></code> constraint (<a href="#id77"><span class="problematic" id="id78">:ticket:`23987`</span></a>).</li>
<li><code class="docutils literal"><span class="pre">makemigrations</span></code> no longer prompts for a default value when adding
<code class="docutils literal"><span class="pre">TextField()</span></code> or <code class="docutils literal"><span class="pre">CharField()</span></code> without a <code class="docutils literal"><span class="pre">default</span></code> (<a href="#id79"><span class="problematic" id="id80">:ticket:`23405`</span></a>).</li>
<li>Fixed a migration crash when adding <code class="docutils literal"><span class="pre">order_with_respect_to</span></code> to a table
with existing rows (<a href="#id81"><span class="problematic" id="id82">:ticket:`23983`</span></a>).</li>
<li>Restored the <code class="docutils literal"><span class="pre">pre_migrate</span></code> signal if all apps have migrations
(<a href="#id83"><span class="problematic" id="id84">:ticket:`23975`</span></a>).</li>
<li>Made admin system checks run for custom <code class="docutils literal"><span class="pre">AdminSite</span></code>s (<a href="#id85"><span class="problematic" id="id86">:ticket:`23497`</span></a>).</li>
<li>Ensured the app registry is fully populated when unpickling models. When an
external script (like a queueing infrastructure) reloads pickled models, it
could crash with an <code class="docutils literal"><span class="pre">AppRegistryNotReady</span></code> exception (<a href="#id87"><span class="problematic" id="id88">:ticket:`24007`</span></a>).</li>
<li>Added quoting to field indexes in the SQL generated by migrations to prevent
a crash when the index name requires it (<a href="#id89"><span class="problematic" id="id90">:ticket:`#24015`</span></a>).</li>
<li>Added <code class="docutils literal"><span class="pre">datetime.time</span></code> support to migrations questioner (<a href="#id91"><span class="problematic" id="id92">:ticket:`23998`</span></a>).</li>
<li>Fixed admindocs crash on apps installed as eggs (<a href="#id93"><span class="problematic" id="id94">:ticket:`23525`</span></a>).</li>
<li>Changed migrations autodetector to generate an <code class="docutils literal"><span class="pre">AlterModelOptions</span></code> operation
instead of <code class="docutils literal"><span class="pre">DeleteModel</span></code> and <code class="docutils literal"><span class="pre">CreateModel</span></code> operations when changing
<code class="docutils literal"><span class="pre">Meta.managed</span></code>. This prevents data loss when changing <code class="docutils literal"><span class="pre">managed</span></code> from
<code class="docutils literal"><span class="pre">False</span></code> to <code class="docutils literal"><span class="pre">True</span></code> and vice versa (<a href="#id95"><span class="problematic" id="id96">:ticket:`24037`</span></a>).</li>
<li>Enabled the <code class="docutils literal"><span class="pre">sqlsequencereset</span></code> command on apps with migrations
(<a href="#id97"><span class="problematic" id="id98">:ticket:`24054`</span></a>).</li>
<li>Added tablespace SQL to apps with migrations (<a href="#id99"><span class="problematic" id="id100">:ticket:`24051`</span></a>).</li>
<li>Corrected <code class="docutils literal"><span class="pre">contrib.sites</span></code> default site creation in a multiple database
setup (<a href="#id101"><span class="problematic" id="id102">:ticket:`24000`</span></a>).</li>
<li>Restored support for objects that aren’t <code class="xref py py-class docutils literal"><span class="pre">str</span></code> or <code class="xref py py-class docutils literal"><span class="pre">bytes</span></code> in
<code class="docutils literal"><span class="pre">django.utils.safestring.mark_for_escaping()</span></code> on Python 3.</li>
<li>Supported strings escaped by third-party libraries with the <code class="docutils literal"><span class="pre">__html__</span></code>
convention in the template engine (<a href="#id103"><span class="problematic" id="id104">:ticket:`23831`</span></a>).</li>
<li>Prevented extraneous <code class="docutils literal"><span class="pre">DROP</span> <span class="pre">DEFAULT</span></code> SQL in migrations (<a href="#id105"><span class="problematic" id="id106">:ticket:`23581`</span></a>).</li>
<li>Restored the ability to use more than five levels of subqueries
(<a href="#id107"><span class="problematic" id="id108">:ticket:`23758`</span></a>).</li>
<li>Fixed crash when <code class="docutils literal"><span class="pre">ValidationError</span></code> is initialized with a <code class="docutils literal"><span class="pre">ValidationError</span></code>
that is initialized with a dictionary (<a href="#id109"><span class="problematic" id="id110">:ticket:`24008`</span></a>).</li>
<li>Prevented a crash on apps without migrations when running <code class="docutils literal"><span class="pre">migrate</span> <span class="pre">--list</span></code>
(<a href="#id111"><span class="problematic" id="id112">:ticket:`23366`</span></a>).</li>
</ul>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, j_hao104.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.10',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>