

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>GeoDjango Forms API &mdash; django-chinese-docs 1.10 文档</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="索引"
              href="../../../genindex.html"/>
        <link rel="search" title="搜索" href="../../../search.html"/>
    <link rel="top" title="django-chinese-docs 1.10 文档" href="../../../index.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> django-chinese-docs
          

          
          </a>

          
            
            
              <div class="version">
                1.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../intro/index.html">入门教程</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">django-chinese-docs</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
      <li>GeoDjango Forms API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/ref/contrib/gis/forms-api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-django.contrib.gis.forms">
<span id="geodjango-forms-api"></span><h1>GeoDjango Forms API<a class="headerlink" href="#module-django.contrib.gis.forms" title="永久链接至标题">¶</a></h1>
<p>GeoDjango provides some specialized form fields and widgets in order to visually
display and edit geolocalized data on a map. By default, they use
<a class="reference external" href="http://openlayers.org/">OpenLayers</a>-powered maps, with a base WMS layer provided by <a class="reference external" href="http://www.metacarta.com/">Metacarta</a>.</p>
<div class="section" id="field-arguments">
<h2>Field arguments<a class="headerlink" href="#field-arguments" title="永久链接至标题">¶</a></h2>
<p>In addition to the regular <a class="reference internal" href="../../forms/fields.html#core-field-arguments"><span class="std std-ref">form field arguments</span></a>,
GeoDjango form fields take the following optional arguments.</p>
<div class="section" id="srid">
<h3><code class="docutils literal"><span class="pre">srid</span></code><a class="headerlink" href="#srid" title="永久链接至标题">¶</a></h3>
<dl class="attribute">
<dt id="django.contrib.gis.forms.Field.srid">
<code class="descclassname">Field.</code><code class="descname">srid</code><a class="headerlink" href="#django.contrib.gis.forms.Field.srid" title="永久链接至目标">¶</a></dt>
<dd><p>This is the SRID code that the field value should be transformed to. For
example, if the map widget SRID is different from the SRID more generally
used by your application or database, the field will automatically convert
input values into that SRID.</p>
</dd></dl>

</div>
<div class="section" id="geom-type">
<h3><code class="docutils literal"><span class="pre">geom_type</span></code><a class="headerlink" href="#geom-type" title="永久链接至标题">¶</a></h3>
<dl class="attribute">
<dt id="django.contrib.gis.forms.Field.geom_type">
<code class="descclassname">Field.</code><code class="descname">geom_type</code><a class="headerlink" href="#django.contrib.gis.forms.Field.geom_type" title="永久链接至目标">¶</a></dt>
<dd><p>You generally shouldn’t have to set or change that attribute which should
be setup depending on the field class. It matches the OpenGIS standard
geometry name.</p>
</dd></dl>

</div>
</div>
<div class="section" id="form-field-classes">
<h2>Form field classes<a class="headerlink" href="#form-field-classes" title="永久链接至标题">¶</a></h2>
<div class="section" id="geometryfield">
<h3><code class="docutils literal"><span class="pre">GeometryField</span></code><a class="headerlink" href="#geometryfield" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="django.contrib.gis.forms.GeometryField">
<em class="property">class </em><code class="descclassname">django.contrib.gis.forms.</code><code class="descname">GeometryField</code><a class="reference internal" href="../../../_modules/django/contrib/gis/forms/fields.html#GeometryField"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#django.contrib.gis.forms.GeometryField" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="pointfield">
<h3><code class="docutils literal"><span class="pre">PointField</span></code><a class="headerlink" href="#pointfield" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="django.contrib.gis.forms.PointField">
<em class="property">class </em><code class="descclassname">django.contrib.gis.forms.</code><code class="descname">PointField</code><a class="reference internal" href="../../../_modules/django/contrib/gis/forms/fields.html#PointField"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#django.contrib.gis.forms.PointField" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="linestringfield">
<h3><code class="docutils literal"><span class="pre">LineStringField</span></code><a class="headerlink" href="#linestringfield" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="django.contrib.gis.forms.LineStringField">
<em class="property">class </em><code class="descclassname">django.contrib.gis.forms.</code><code class="descname">LineStringField</code><a class="reference internal" href="../../../_modules/django/contrib/gis/forms/fields.html#LineStringField"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#django.contrib.gis.forms.LineStringField" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="polygonfield">
<h3><code class="docutils literal"><span class="pre">PolygonField</span></code><a class="headerlink" href="#polygonfield" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="django.contrib.gis.forms.PolygonField">
<em class="property">class </em><code class="descclassname">django.contrib.gis.forms.</code><code class="descname">PolygonField</code><a class="reference internal" href="../../../_modules/django/contrib/gis/forms/fields.html#PolygonField"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#django.contrib.gis.forms.PolygonField" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="multipointfield">
<h3><code class="docutils literal"><span class="pre">MultiPointField</span></code><a class="headerlink" href="#multipointfield" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="django.contrib.gis.forms.MultiPointField">
<em class="property">class </em><code class="descclassname">django.contrib.gis.forms.</code><code class="descname">MultiPointField</code><a class="reference internal" href="../../../_modules/django/contrib/gis/forms/fields.html#MultiPointField"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#django.contrib.gis.forms.MultiPointField" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="multilinestringfield">
<h3><code class="docutils literal"><span class="pre">MultiLineStringField</span></code><a class="headerlink" href="#multilinestringfield" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="django.contrib.gis.forms.MultiLineStringField">
<em class="property">class </em><code class="descclassname">django.contrib.gis.forms.</code><code class="descname">MultiLineStringField</code><a class="reference internal" href="../../../_modules/django/contrib/gis/forms/fields.html#MultiLineStringField"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#django.contrib.gis.forms.MultiLineStringField" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="multipolygonfield">
<h3><code class="docutils literal"><span class="pre">MultiPolygonField</span></code><a class="headerlink" href="#multipolygonfield" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="django.contrib.gis.forms.MultiPolygonField">
<em class="property">class </em><code class="descclassname">django.contrib.gis.forms.</code><code class="descname">MultiPolygonField</code><a class="reference internal" href="../../../_modules/django/contrib/gis/forms/fields.html#MultiPolygonField"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#django.contrib.gis.forms.MultiPolygonField" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="geometrycollectionfield">
<h3><code class="docutils literal"><span class="pre">GeometryCollectionField</span></code><a class="headerlink" href="#geometrycollectionfield" title="永久链接至标题">¶</a></h3>
<dl class="class">
<dt id="django.contrib.gis.forms.GeometryCollectionField">
<em class="property">class </em><code class="descclassname">django.contrib.gis.forms.</code><code class="descname">GeometryCollectionField</code><a class="reference internal" href="../../../_modules/django/contrib/gis/forms/fields.html#GeometryCollectionField"><span class="viewcode-link">[源代码]</span></a><a class="headerlink" href="#django.contrib.gis.forms.GeometryCollectionField" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

</div>
</div>
<div class="section" id="module-django.contrib.gis.widgets">
<span id="form-widgets"></span><h2>Form widgets<a class="headerlink" href="#module-django.contrib.gis.widgets" title="永久链接至标题">¶</a></h2>
<p>GeoDjango form widgets allow you to display and edit geographic data on a
visual map.
Note that none of the currently available widgets supports 3D geometries, hence
geometry fields will fallback using a simple <code class="docutils literal"><span class="pre">Textarea</span></code> widget for such data.</p>
<div class="section" id="widget-attributes">
<h3>Widget attributes<a class="headerlink" href="#widget-attributes" title="永久链接至标题">¶</a></h3>
<p>GeoDjango widgets are template-based, so their attributes are mostly different
from other Django widget attributes.</p>
<dl class="attribute">
<dt id="django.contrib.gis.widgets.BaseGeometryWidget.geom_type">
<code class="descclassname">BaseGeometryWidget.</code><code class="descname">geom_type</code><a class="headerlink" href="#django.contrib.gis.widgets.BaseGeometryWidget.geom_type" title="永久链接至目标">¶</a></dt>
<dd><p>The OpenGIS geometry type, generally set by the form field.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.gis.widgets.BaseGeometryWidget.map_height">
<code class="descclassname">BaseGeometryWidget.</code><code class="descname">map_height</code><a class="headerlink" href="#django.contrib.gis.widgets.BaseGeometryWidget.map_height" title="永久链接至目标">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="django.contrib.gis.widgets.BaseGeometryWidget.map_width">
<code class="descclassname">BaseGeometryWidget.</code><code class="descname">map_width</code><a class="headerlink" href="#django.contrib.gis.widgets.BaseGeometryWidget.map_width" title="永久链接至目标">¶</a></dt>
<dd><p>Height and width of the widget map (default is 400x600).</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.gis.widgets.BaseGeometryWidget.map_srid">
<code class="descclassname">BaseGeometryWidget.</code><code class="descname">map_srid</code><a class="headerlink" href="#django.contrib.gis.widgets.BaseGeometryWidget.map_srid" title="永久链接至目标">¶</a></dt>
<dd><p>SRID code used by the map (default is 4326).</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.gis.widgets.BaseGeometryWidget.display_raw">
<code class="descclassname">BaseGeometryWidget.</code><code class="descname">display_raw</code><a class="headerlink" href="#django.contrib.gis.widgets.BaseGeometryWidget.display_raw" title="永久链接至目标">¶</a></dt>
<dd><p>Boolean value specifying if a textarea input showing the serialized
representation of the current geometry is visible, mainly for debugging
purposes (default is <code class="docutils literal"><span class="pre">False</span></code>).</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.gis.widgets.BaseGeometryWidget.supports_3d">
<code class="descclassname">BaseGeometryWidget.</code><code class="descname">supports_3d</code><a class="headerlink" href="#django.contrib.gis.widgets.BaseGeometryWidget.supports_3d" title="永久链接至目标">¶</a></dt>
<dd><p>Indicates if the widget supports edition of 3D data (default is <code class="docutils literal"><span class="pre">False</span></code>).</p>
</dd></dl>

<dl class="attribute">
<dt id="django.contrib.gis.widgets.BaseGeometryWidget.template_name">
<code class="descclassname">BaseGeometryWidget.</code><code class="descname">template_name</code><a class="headerlink" href="#django.contrib.gis.widgets.BaseGeometryWidget.template_name" title="永久链接至目标">¶</a></dt>
<dd><p>The template used to render the map widget.</p>
</dd></dl>

<p>You can pass widget attributes in the same manner that for any other Django
widget. For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib.gis</span> <span class="k">import</span> <span class="n">forms</span>

<span class="k">class</span> <span class="nc">MyGeoForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">Form</span><span class="p">):</span>
    <span class="n">point</span> <span class="o">=</span> <span class="n">forms</span><span class="o">.</span><span class="n">PointField</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span>
        <span class="n">forms</span><span class="o">.</span><span class="n">OSMWidget</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;map_width&#39;</span><span class="p">:</span> <span class="mi">800</span><span class="p">,</span> <span class="s">&#39;map_height&#39;</span><span class="p">:</span> <span class="mi">500</span><span class="p">}))</span>
</pre></div>
</div>
</div>
<div class="section" id="widget-classes">
<h3>Widget classes<a class="headerlink" href="#widget-classes" title="永久链接至标题">¶</a></h3>
<p><code class="docutils literal"><span class="pre">BaseGeometryWidget</span></code></p>
<dl class="class">
<dt id="django.contrib.gis.widgets.BaseGeometryWidget">
<em class="property">class </em><code class="descclassname">django.contrib.gis.widgets.</code><code class="descname">BaseGeometryWidget</code><a class="headerlink" href="#django.contrib.gis.widgets.BaseGeometryWidget" title="永久链接至目标">¶</a></dt>
<dd><p>This is an abstract base widget containing the logic needed by subclasses.
You cannot directly use this widget for a geometry field.
Note that the rendering of GeoDjango widgets is based on a template,
identified by the <a class="reference internal" href="#django.contrib.gis.widgets.BaseGeometryWidget.template_name" title="django.contrib.gis.widgets.BaseGeometryWidget.template_name"><code class="xref py py-attr docutils literal"><span class="pre">template_name</span></code></a> class attribute.</p>
</dd></dl>

<p><code class="docutils literal"><span class="pre">OpenLayersWidget</span></code></p>
<dl class="class">
<dt id="django.contrib.gis.widgets.OpenLayersWidget">
<em class="property">class </em><code class="descclassname">django.contrib.gis.widgets.</code><code class="descname">OpenLayersWidget</code><a class="headerlink" href="#django.contrib.gis.widgets.OpenLayersWidget" title="永久链接至目标">¶</a></dt>
<dd><p>This is the default widget used by all GeoDjango form fields.
<code class="docutils literal"><span class="pre">template_name</span></code> is <code class="docutils literal"><span class="pre">gis/openlayers.html</span></code>.</p>
<p><code class="docutils literal"><span class="pre">OpenLayersWidget</span></code> and <a class="reference internal" href="#django.contrib.gis.widgets.OSMWidget" title="django.contrib.gis.widgets.OSMWidget"><code class="xref py py-class docutils literal"><span class="pre">OSMWidget</span></code></a> use the <code class="docutils literal"><span class="pre">openlayers.js</span></code> file
hosted on the <code class="docutils literal"><span class="pre">openlayers.org</span></code> website. This works for basic usage
during development, but isn’t appropriate for a production deployment as
<code class="docutils literal"><span class="pre">openlayers.org/api/</span></code> has no guaranteed uptime and runs on a slow server.
You are therefore advised to subclass these widgets in order to specify
your own version of the <code class="docutils literal"><span class="pre">openlayers.js</span></code> file in the <code class="docutils literal"><span class="pre">js</span></code> property of
the inner <code class="docutils literal"><span class="pre">Media</span></code> class (see <a class="reference internal" href="../../../topics/forms/media.html#assets-as-a-static-definition"><span class="std std-ref">Assets as a static definition</span></a>). You
can host a copy of <code class="docutils literal"><span class="pre">openlayers.js</span></code>
<a class="reference external" href="http://docs.openlayers.org/library/deploying.html">tailored to your needs</a> on your own server or refer to a copy from a
content-delivery network like <a class="reference external" href="https://cdnjs.com/">https://cdnjs.com/</a>. This will also allow
you to serve the JavaScript file(s) using the <code class="docutils literal"><span class="pre">https</span></code> protocol if needed.</p>
</dd></dl>

<p><code class="docutils literal"><span class="pre">OSMWidget</span></code></p>
<dl class="class">
<dt id="django.contrib.gis.widgets.OSMWidget">
<em class="property">class </em><code class="descclassname">django.contrib.gis.widgets.</code><code class="descname">OSMWidget</code><a class="headerlink" href="#django.contrib.gis.widgets.OSMWidget" title="永久链接至目标">¶</a></dt>
<dd><p>This widget uses an OpenStreetMap base layer (Mapnik) to display geographic
objects on.
<code class="docutils literal"><span class="pre">template_name</span></code> is <code class="docutils literal"><span class="pre">gis/openlayers-osm.html</span></code>.</p>
<p>The <a class="reference internal" href="#django.contrib.gis.widgets.OpenLayersWidget" title="django.contrib.gis.widgets.OpenLayersWidget"><code class="xref py py-class docutils literal"><span class="pre">OpenLayersWidget</span></code></a> note about JavaScript file hosting above also
applies here. See also this <a class="reference external" href="https://help.openstreetmap.org/questions/10920/how-to-embed-a-map-in-my-https-site">FAQ answer</a> about <code class="docutils literal"><span class="pre">https</span></code> access to map
tiles.</p>
</dd></dl>

</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, j_hao104.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'1.10',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>